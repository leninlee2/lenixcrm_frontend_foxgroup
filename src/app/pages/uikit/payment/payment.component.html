<div class="card-container mb10">
    <p-card class="w100" >
        <h3>&nbsp;Payments</h3>
    </p-card>
</div>

<div class="card-container mb10">
  <table class="w100">
    <tr>
      <td  style="width: 50% !important;" >
        <p-card >
          <h3>&nbsp;Payments</h3>
          <h5><p-datepicker id="datePeriod" class="flex-auto" 
            [(ngModel)]="paymentControl.createDate" view="month" dateFormat="mm/yy" (onSelect)="getAllPayments()" /></h5>
          <table class="w100" >
              <tr class="rowSize">
                <td  class="w25" >
                  <label for="salesman" class="font-semibold w-24 mb5">Salesman&nbsp;</label><br/>
                  <input pInputText id="salesman" class="flex-auto  w98" disabled="true" autocomplete="off" [(ngModel)]="salesman.name" />&nbsp;
                </td>
                <td  class="w25" >
                  <label for="value" class="font-semibold w-24">Value&nbsp;</label><br/>
                  <input pInputText id="value" class="flex-auto  w98" autocomplete="off" [(ngModel)]="paymentControl.value" />&nbsp;
                </td>
                <!--
                <p-toggleswitch [(ngModel)]="switchValue" />
                -->
                <td  class="w25" >
                  <table class="w100">
                    <tr>
                      <td>
                        <label for="commission" class="font-semibold w-24">By Commission&nbsp;</label><br/>
                        <p-toggleswitch [(ngModel)]="paymentControl.hasCommission" />&nbsp;
                      </td>
                      <td *ngIf="paymentControl.hasCommission" >
                        <label for="commission" class="font-semibold w-24">Commission&nbsp;</label><br/>
                        <input pInputText id="commission" class="flex-auto  w98" autocomplete="off" [(ngModel)]="paymentControl.commission" />&nbsp;      
                      </td>
                    </tr>
                  </table>
                  
                </td>
                <td  class="w25" >
                  <h5 for="total" class="font-semibold w-24">Total:&nbsp;{{getTotal()}}&nbsp;</h5>
                </td>
                
              </tr>
              <tr>
                <td  class="w25">
                  <label for="percent" class="font-semibold w-24 mb5">Payment Date&nbsp;</label><br/>
                  <p-datepicker id="datePeriod" class="flex-auto" 
                        [(ngModel)]="paymentControl.paymentDate"  />
                </td>
                <td  class="w25" >
                  <label for="cm1" class="font-semibold w-24 mb5">Payment Mode&nbsp;</label><br/>
                  <input pInputText id="cm1" class="flex-auto  w98" autocomplete="off" [(ngModel)]="paymentControl.paymentMode" />&nbsp;
                </td>
                <td  class="w75" colspan="3">
                  <label for="percent" class="font-semibold w-24 mb5">Description&nbsp;</label><br/>
                  <input pInputText id="percent" class="flex-auto  w98" autocomplete="off" [(ngModel)]="paymentControl.description" />&nbsp;
                </td>
                
              </tr>
              <tr>
                <td colspan="4" >
                  &nbsp;
                  <p-button [label]="getStateGeneralControl()" severity="success" class="right ml5 mb5" (click)="addPayment()"  />
                  <p-button *ngIf="paymentControl.id > 0" label="Reset" severity="success" class="right ml5 mb5" (click)="resetPayment()"  />&nbsp;
                  <br/><br/>
                </td>
              </tr>          
          </table>
          <p-table [value]="payments" [style]="{ 'width': '100%' }" class="mb10" >
            <ng-template #header>
                <tr>
                    <th>Record Date</th>
                    <th>Payment Date</th>
                    <th>Salesman</th>
                    <th>Value</th>
                    <th>Commission (%)</th>
                    <th>Total</th>
                    <th>Paid</th>
                    <th>Payment Mode</th>
                    <th>Description</th>
                    <th>-</th>
                    <th>-</th>
                </tr>
            </ng-template>
            <ng-template #body let-row  >
            <tr  >
                    <td>{{ row.createDate | date: 'MM/dd/yyyy' }}</td>
                    <td>{{ row.paymentDate | date: 'MM/dd/yyyy' }}</td>
                    <td>{{ row.nameSalesman}}</td>
                    <td >{{ row.value | currency: 'USD'}}</td>
                    <td *ngIf="row.hasCommission" >{{ row.commission}}</td>
                    <td *ngIf="!row.hasCommission" >-</td>
                    <td >{{ row.total | currency: 'USD'}}</td>
                    <td >{{ (row.paymentDate != null? 'Paid':'Not Paid' )}}</td>    
                    <td>{{ row.paymentMode}}</td>
                    <td>{{ row.description}}</td>
                    <td >
                      <i class="pi pi-pencil" style="color: slateblue" (click)="editPayment(row)"  ></i>   
                    </td>
                    <td >
                      <i class="pi pi-trash" style="color: slateblue" (click)="inactivePayment(row)"  ></i>   
                    </td>
                </tr>
              </ng-template>
            </p-table>

        </p-card>
      </td>
    </tr>
  </table>
  
  
</div>